(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-templates-relationFileTab"],{"0fa6":function(e,t,a){e.exports=a.p+"static/img/nodata.2945b091.png"},1674:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"listCreateTemplate relationFileTab"},[i("v-uni-view",{staticClass:"relationFileTab-header"},[i("v-uni-view",{staticClass:"header"},[i("m-back-bar",[i("template",{attrs:{slot:"barTitle"},slot:"barTitle"},[e._v(e._s(e.barTitle))]),i("template",{attrs:{slot:"barRight"},slot:"barRight"},[i("m-button",{on:{elementClick:function(t){arguments[0]=t=e.$handleEvent(t),e.handleTopClick()}}},[i("template",{staticStyle:{display:"inline-block"},attrs:{slot:"buttonIcon"},slot:"buttonIcon"},[i("m-font-icon",{attrs:{iconSize:40}})],1)],2)],1)],2),i("v-uni-view",{staticClass:"list-search"},[i("v-uni-view",{staticClass:"search-wrap"},[i("v-uni-view",{staticClass:"search-view"},[i("v-uni-input",{staticClass:"keywords",attrs:{name:"keywords",placeholder:e.$t("formTip-placeholder")},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),i("m-font-icon",{staticClass:"sousuo",attrs:{icon:"iconsousuo",iconSize:30},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.searchFiles()}}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"filepath"},[i("v-uni-view",{staticClass:"path-wrap"},e._l(e.filePath,(function(t,a){return i("p",{key:t.createDate,on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.goToStep(t,a)}}},[0==a?i("m-font-icon",{attrs:{icon:"iconzhishikuweizhihuidaodiyiji",color:"#C62127",iconSize:e.iconSize}}):e._e(),e._v(e._s(t.name)),a<e.filePath.length-1?i("span",[e._v(">")]):e._e()],1)})),0)],1),1==e.tabIndex?i("v-uni-scroll-view",{staticClass:"list-wrap",attrs:{"scroll-y":!0}},[e._l(e.fileData,(function(t,n){return i("v-uni-view",{key:n,on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.getFiles(t,t.id)}}},[i("v-uni-view",{staticClass:"fileItem"},[i("v-uni-view",{staticClass:"icon-box"},[i("v-uni-image",{attrs:{src:a("9373")}})],1),i("v-uni-view",{staticClass:"folder"},[i("p",{staticClass:"title"},[e._v(e._s(t.name))]),i("p",{staticClass:"date"},[e._v(e._s(e.formatDate(t.createDate)))])]),i("v-uni-view",{staticClass:"arrow-right"},[i("span")])],1)],1)})),e._l(e.getFileData,(function(t,a){return i("v-uni-view",{key:a},[i("v-uni-view",{staticClass:"fileItem"},[i("v-uni-view",{staticClass:"icon-box fileicon",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.previewFile(t.id,t.displayFileName,t.url)}}},["png"==e.formatIcon(t.displayFileName)?i("m-font-icon",{attrs:{color:"#4E94D9",icon:"APP_40",iconSize:64}}):"jpg"==e.formatIcon(t.displayFileName)||"jpeg"==e.formatIcon(t.displayFileName)?i("m-font-icon",{attrs:{color:"#FF8102",icon:"APP_39",iconSize:64}}):"doc"==e.formatIcon(t.displayFileName)||"docx"==e.formatIcon(t.displayFileName)?i("m-font-icon",{attrs:{color:"#FF933D",icon:"APP_37",iconSize:64}}):"ppt"==e.formatIcon(t.displayFileName)||"pptx"==e.formatIcon(t.displayFileName)?i("m-font-icon",{attrs:{color:"#47C69A",icon:"APP_34",iconSize:64}}):"zip"==e.formatIcon(t.displayFileName)||"rar"==e.formatIcon(t.displayFileName)?i("m-font-icon",{attrs:{color:"#B9C1CF",icon:"APP_36",iconSize:64}}):"pdf"==e.formatIcon(t.displayFileName)?i("m-font-icon",{attrs:{color:"#F15643",icon:"APP_35",iconSize:64}}):"txt"==e.formatIcon(t.displayFileName)?i("m-font-icon",{attrs:{color:"#F15643",icon:"APP_41",iconSize:64}}):"mp3"==e.formatIcon(t.displayFileName)?i("m-font-icon",{attrs:{color:"#FF932F",icon:"APP_42",iconSize:64}}):"mp4"==e.formatIcon(t.displayFileName)?i("m-font-icon",{attrs:{color:"#4E7DD9",icon:"APP_43",iconSize:64}}):i("m-font-icon",{attrs:{color:"#B9C1CF",icon:"APP_38",iconSize:64}})],1),i("v-uni-view",{staticClass:"file",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.previewFile(t.id,t.displayFileName,t.url)}}},[i("p",{staticClass:"title"},[e._v(e._s(t.displayFileName))]),i("p",{staticClass:"date"},[e._v(e._s(e.formatDate(t.updateDate))),i("v-uni-view",{staticClass:"fileSize"},[e._v(e._s(e.formatSize(t.fileLength)))])],1)]),i("v-uni-view",{staticClass:"downloadIcon"},[i("a",{attrs:{target:"_blank",href:(e.baseUrl||e.defaultUrl)+"file/download?id="+t.id+"&token="+e.token+"\n\t\t\t\t\t\t\t&relationTableName="+e.relationTableName+"\n\t\t\t\t\t\t\t&relationColumnName="+(e.relationColumnName||"id")+"\n\t\t\t\t\t\t\t&relationId="+e.relationId,download:(e.baseUrl||e.defaultUrl)+"file/download?id="+t.id+"&token="+e.token+"\n\t\t\t\t\t\t\t&relationTableName="+e.relationTableName+"\n\t\t\t\t\t\t\t&relationColumnName="+(e.relationColumnName||"id")+"\n\t\t\t\t\t\t\t&relationId="+e.relationId}},[i("m-font-icon",{staticClass:"xiazai",attrs:{icon:"APP_44",iconSize:30,color:"#9b9b9b"}})],1)])],1)],1)}))],2):e._e(),0!==e.fileData.length||0!==e.getFileData.length||e.isLoading||1!=e.tabIndex?e._e():i("v-uni-view",{staticClass:"animated nodata",class:[0===e.fileData.length&&0===e.getFileData.length?"fadeIn":"fadeOut"],style:{backgroundImage:"url("+e.nodataImg+")"}}),e.isLoading?i("v-uni-view",{staticClass:"downloadPro"},[i("v-uni-view",{staticClass:"downloadBox"},[i("p",{staticClass:"downname i18n"},[e._v(e._s(e.$t("basic-download"))),i("span",[e._v(e._s(e.downFileName))]),e._v("...")]),i("v-uni-view",{staticClass:"progress-box progressBox"},[i("v-uni-view",{staticClass:"progressState",style:{width:e.percent+"%"}})],1),i("p",{staticClass:"downpro"},[e._v(e._s(e.percent)+"%")])],1),i("v-uni-button",{staticClass:"abort-download",attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancleDownload.apply(void 0,arguments)}}},[e._v(e._s(e.$t("page-cancelDownload")))])],1):e._e(),e.isPreviewVideo?i("v-uni-view",{staticClass:"previewVideoBox"},[i("v-uni-video",{attrs:{id:"previewVideo",src:e.videoUrl,controls:!0}}),i("m-font-icon",{staticClass:"closeVideo",attrs:{icon:"iconqingchu",iconSize:32},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.shopPreviewVideo.apply(void 0,arguments)}}})],1):e._e(),e.isPreviewSound?i("v-uni-view",{staticClass:"previewSoundBox"},[i("v-uni-view",{staticClass:"soundPanel"},[i("v-uni-view",{staticClass:"currentTime"},[e._v(e._s(e.formatTime(e.currentTime,2)))]),i("v-uni-view",{staticClass:"progressBar"},[i("v-uni-view",{style:{width:e.durationWidth}})],1),i("v-uni-view",{staticClass:"surplusTime"},[e._v(e._s(e.formatTime(e.surplusTime,1)))])],1),i("m-font-icon",{staticClass:"closeSound",attrs:{icon:"iconqingchu",iconSize:32},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.stopPreviewSound.apply(void 0,arguments)}}})],1):e._e()],1)},n=[]},"1aeb":function(e,t,a){"use strict";var i=a("2a50f"),n=a.n(i);n.a},"2a50f":function(e,t,a){var i=a("e4a0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("751e28e6",i,!0,{sourceMap:!1,shadowMode:!1})},"35d4":function(e,t,a){"use strict";a.r(t);var i=a("1674"),n=a("86c4");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("1aeb");var s=a("f0c5"),l=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"772e3562",null,!1,i["a"],void 0);t["default"]=l.exports},"551a":function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d81d"),a("14d9");var n=i(a("53ca")),o=i(a("d4ec")),s=i(a("bee2")),l=a("cad8"),r=(a("cd03"),function(){function e(t,a){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"advancedParams",value:function(e,t){var a=t.advancedQuery,i=t.advancedSqlQuery,o=t.relationMainTab,s=t.bundleParams,l=t.tabStaticParams,r={advancedQuery:{},advancedSqlQuery:{}},c={otherTabId:o,tabsElements:e.tabsElements,tabsFormDatas:e.tabsFormDatas,bundleParams:s,tabStaticParams:l};for(var u in a){var d=c;d.key=u;var f=e.Static_GlobalFucs.Global_ParamFormat(d,e);f&&"object"===(0,n.default)(f)&&(f=f.id),r.advancedQuery[u]=f}return i.map((function(t){var a=c;a.key=t;var i=e.Static_GlobalFucs.Global_ParamFormat(a,e);r.advancedSqlQuery[t]={value:i.id,type:i.relationColumnType}})),r}},{key:"clickListNode",value:function(e,t){var a=t.primaryKey,i=t.listItem||{},n=i[a]||"";if(n=t.isMain?e.Static_GlobalFucs.setBusinessID(e,n):e.Static_GlobalFucs.dataFormat(n),t.mobileTabRelationTabId){var o=t.mobileTabs[t.mobileTabRelationTabId],s=o.mobileTabShowType,r=o.childMobilTable||[],c={tabId:t.mobileTabRelationTabId,params:{relationTab:t.mobileTabRelationTabId,relationMainTab:t.mobileTabId,onkey:t.selfKey,id:n.id,refreshParams:t.refreshParams,bundleId:t.bundleId,bundleName:t.bundleName,tabStaticParams:t.tabStaticParams}};e.SET_TEMPLATE_PARAMS(c);var u=l.mobileTabShowType[s];2===s&&r.length>0&&(u="templates/formListTemplate"),e.Static_GlobalFucs.gotoOtherRoute(c,u)}}},{key:"handleSearchText",value:function(e,t){var a=t.quickQueryParams||{},i=[],n={};if(1===t.searchType){for(var o in a){var s=a[o].relationColumnName,l=a[o].relationTableName;a[o].mainTableName&&(s=a[o].mainColumnName,l=a[o].mainTableName);var r={field:s,value:t.searchText,tableName:l,elementId:a[o].elementId||""};i.push(r)}n={calendarList:i}}else 2===t.searchType&&(n={seniorFilterMap:t.searchText});return n}}]),e}()),c=r;t.default=c},"86c4":function(e,t,a){"use strict";a.r(t);var i=a("dfb6"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},9322:function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("5530"));a("a9e3");var o=i(a("3184")),s=a("26cb"),l=a("ea34"),r={name:"mInputSearch",props:{fixed:{type:Boolean,default:!0},tabInfo:{type:Object,required:!0},top:String,mobileTabId:Number,isQuickQuery:{type:Boolean,default:!1},isSeniorFilter:{type:Boolean,default:!1},quickQuery:{type:Object,default:function(){}}},data:function(){return{show:!0,searchText:"",searchType:1,seniorFilter:{}}},watch:{searchText:function(e,t){e!=t&&this.doSearch()},seniorFilter:function(e,t){e!=t&&this.doSearch(e)}},computed:(0,n.default)({},(0,s.mapState)(["QRType"])),methods:(0,n.default)((0,n.default)({},(0,s.mapMutations)("common",["SET_TEMPLATE_PARAMS"])),{},{handleScanSearch:function(){var e=this;(0,l.ELEMENT_SCAN)({},(function(t){var a=t.scancode;a&&(e.searchType=1,e.searchText=a)}))},showSearch:function(){var e="search".concat(this._uid);this.searchType=1,uni.navigateTo({url:"/pages/common/searchTemplate?onKey=".concat(e)})},handleClear:function(){this.searchType=1,this.searchText=""},handleSearch:function(){this.searchType=1,this.doSearch()},doSearch:function(e){this.$emit("doSearch",{searchText:e||this.searchText,searchType:this.searchType,tabInfo:this.tabInfo})},openFilter:function(){var e="search".concat(this._uid);this.searchType=2;var t={tabId:"advancedFilter_".concat(this.mobileTabId),params:{relationTab:this.mobileTabId,onkey:e,bundleId:this.tabInfo.bundleId,bundleName:this.tabInfo.bundleName}};this.SET_TEMPLATE_PARAMS(t),uni.navigateTo({url:"/pages/common/advancedFilter?relationTab=".concat(this.mobileTabId)})}}),created:function(){var e=this,t="search".concat(this._uid);o.default.$on(t,(function(t){2===e.searchType?e.seniorFilter=t:e.searchText=t})),console.log(this.quickQuery)},beforeDestroy:function(){var e="search".concat(this._uid);o.default.$off(e)}};t.default=r},9373:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAABSCAYAAADHLIObAAAAAXNSR0IArs4c6QAAA3xJREFUeAHt3EtrE1EUB/BzJknTR2qr+OhCBF24qA+0tRvBhS987ZT6NSroRty0CxfuXbnwA9iVi5baFqRYBKErofUBgiu11oWCIrYm15NI4N5pTjMHkrRl/gNpZub8Z+69v9zJZNGECAsEIAABCEAAAhCAAAQgAAEIQAACjRRg7WTOUURTdIMc3ZTHADH1yHNGy5v2My1L/hpfpQ+m47ZwuCakm6VDtErjFcBmdZ7pk7ws5/kSvW1WE6087zpI94wOUpFeCeKepneE6avM9It8hV43va0mNxD555fLmQXxSUsQyw072iuP526CTvn92I7rASRN0nUZWGsH5WiXvHyzciWc3o6A1T6HkEzD1UJLn53cyIo07abobEvbbWBjIaSj4w08t+1UjroEc0IwL9sO3Brp4GbjJuXN37/JZHJEbQWibDtR1JhPPgmGXZK2lqUfW2FZpVLxG1Fxhgr5B3zy43etUyHkBK1IcDexTNQuuWl37NSOS9/+0t81Wvt5n898Gas1+PDSriRkV88BIMa1omyO8r2jbn7/O+dG17mt20HdfUQ5uZSx1BZoKxym+UfT8WIImevMUvuOeAbbcYF89zk3t++YvzuE7OjJ+0WsawLMlOF7fjWEzHTIbRpLIgGXPernQsgoE277SayHAlHU5e8I4cItP4f1OgKgqwOUtAzIpFJ1coCsA5S0DMikUnVygKwDlLQcQjouJj0QOf7lG4SQUfTDL2J9A4Fc54JfDSH9CtZNAoA0celhQOo2pgogTVx6GJC6jakCSBOXHgakbmOqANLEpYcBqduYKoA0celhQOo2pgogTVx6GJC6jakCSBOXHgakbmOqANLEpYcBqduYKoA0celhQOo2pgogTVx6GJC6jakCSBOXHgakbmOqANLEpYcBqduYKoA0celhQOo2pkocctV0dLrDgVUc8nO6bQyjjziwikFGc4ZTpTvKHFiFkDl6LF9CL6VbKMno+T0N9OuQfGJpUb7e+zDJqVKbKU+0TDTCPB78U244I8s6Q323iflpaqE2Gvj/q3WEBxen4jGO7yhvO+eYFvrvyOpd2cCXtitIvCRve7d46M1MZTP2pyZkNeMWjxTod+mCTGb5ASXXKzO1ZT8jUO3Dpj47+iMTaUV+0eAFDQ6/ZB7F/WNTXxA0DgEIQAACEIAABCAAAQhAAAJpEvgH6eWJz/jH/AQAAAAASUVORK5CYII="},a586:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".haveStatusTop[data-v-b2663b3a]{margin-top:0}",""]),e.exports=t},b50d:function(e,t,a){"use strict";a.r(t);var i=a("9322"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},ca3d:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"mInputSearch",class:[e.fixed?"fixed haveStatusTop":"","nofixed"==e.top?"nofixed":""]},[e._t("left"),e.isQuickQuery?a("v-uni-view",{staticClass:"mInputSearch-text",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showSearch.apply(void 0,arguments)}}},[e.searchText?a("v-uni-view",{staticClass:"searchText"},[e._v(e._s(e.searchText))]):a("v-uni-view",{staticClass:"placeholder"},[e._v(e._s(e.$t("formTip-placeholder")))])],1):e._e(),e.searchText&&e.isQuickQuery?a("v-uni-view",{staticClass:"mInputSearch-btn",staticStyle:{"padding-right":"0"}},[a("m-button",{key:"clearBtn",staticStyle:{display:"inline-block"},attrs:{isFontBtn:!0},on:{elementClick:function(t){arguments[0]=t=e.$handleEvent(t),e.handleClear()}}},[a("template",{attrs:{slot:"buttonIcon"},slot:"buttonIcon"},[a("m-font-icon",{attrs:{icon:"iconqingchu",iconSize:34}})],1)],2)],1):e._e(),e.isQuickQuery?a("v-uni-view",{staticClass:"mInputSearch-btn searchBtn"},[a("m-button",{key:"searchBtn",staticStyle:{display:"inline-block"},attrs:{isFontBtn:!0,btnClass:e.searchText?"mainColor":"searchColor"},on:{elementClick:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSearch()}}},[a("template",{attrs:{slot:"buttonIcon"},slot:"buttonIcon"},[a("m-font-icon",{attrs:{icon:"iconsousuo",iconSize:34}})],1)],2)],1):e._e(),e.isQuickQuery&&e.quickQuery.isQRCode&&"0"!==e.QRType?a("v-uni-view",{staticClass:"mInputSearch-btn searchBtn"},[a("m-button",{key:"searchScanBtn",staticClass:"search-btn",staticStyle:{display:"inline-block"},attrs:{isFontBtn:!0,btnClass:e.searchText?"mainColor":"searchColor"},on:{elementClick:function(t){arguments[0]=t=e.$handleEvent(t),e.handleScanSearch()}}},[a("template",{attrs:{slot:"buttonIcon"},slot:"buttonIcon"},[a("m-font-icon",{attrs:{icon:"iconsaoma1",iconSize:34}})],1)],2)],1):e._e(),e._t("other"),e.isSeniorFilter?a("v-uni-view",{staticClass:"mInputSearch-btn"},[a("m-button",{key:"filterBtn",staticStyle:{display:"inline-block"},attrs:{isFontBtn:!0},on:{elementClick:function(t){arguments[0]=t=e.$handleEvent(t),e.openFilter()}}},[a("template",{attrs:{slot:"buttonIcon"},slot:"buttonIcon"},[a("m-font-icon",{attrs:{icon:"iconshaixuan",iconSize:30}})],1)],2)],1):e._e()],2)},n=[]},cf0c:function(e,t,a){"use strict";var i=a("ef50"),n=a.n(i);n.a},dfb6:function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("53ca")),o=i(a("5530"));a("fb6a"),a("a9e3"),a("e9c4"),a("14d9"),a("99af"),a("e25e");var s=a("26cb"),l=i(a("f7ad")),r=i(a("0fa6")),c=i(a("551a")),u=(new c.default,{name:"RelationFileTab",components:{mInputSearch:l.default},data:function(){return{iconSize:32,iconSizeFolder:66,iconSizeFile:74,id:"",userInfo:{userName:"",id:"12"},fileData:[],fileAllData:[],getFileData:[],cloudFileData:[],getCloudFileData:[],tabIndex:1,tabList:[{name:this.$t("lang-relationFile-associated"),value:1}],filePath:[{name:this.$t("lang-relationFile-associated"),id:1,typeId:2}],tempFilePath:"",downFileName:"",downFileProsess:"",isLoading:!1,percent:1,nodataImg:r.default,fileLength:0,keywords:"",groupId:1,relationId:"",relationTableName:"",fileRelationColumnName:"",tableGroupName:"",tabStaticParams:{},rootId:"",barTitle:this.$t("lang-relationFile-associated"),isPreviewVideo:"",isPreviewSound:"",innerAudioContext:"",videoUrl:"",currentTime:0,surplusTime:0,duration:0,durationWidth:"",currentFiles:null,typeId:2}},onBackPress:function(){var e=uni.getStorageSync("relationFilePath");if(e.length>1){var t=e[e.length-2],a=this.filePath.slice(0,e.length-1);return this.filePath=a,t&&t.name!=this.$t("lang-relationFile-associated")?this.getFiles(t,t.id,a):this.getFiles(),!0}},computed:(0,o.default)((0,o.default)({},(0,s.mapState)(["bundleName","bundleId","BusinessID","token","baseUrl","defaultUrl"])),(0,s.mapState)("common",["templateParams","tabsElements","tabsFormDatas"])),onLoad:function(e){var t=e.relationTab;if(t){var a=this.templateParams[t]||{},i=uni.getStorageSync(a.bundleId)||{},n=i.mobileTabs||{},o=n[t]||{},s={_uid:this._uid,relationMainTab:a.relationMainTab,mobileTabId:Number(t),mobileTabs:n};this.setPageInfo(o,s)}},methods:{setPageInfo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.Static_GlobalFucs.Global_ParamFormat({key:e.fileRelationParam,otherTabId:t.relationMainTab,tabsElements:this.tabsElements,tabsFormDatas:this.tabsFormDatas,tabStaticParams:this.tabStaticParams},this);a&&"object"===(0,n.default)(a)&&(a=a.id),this.relationId=a;var i=e.fileRelationTableName,o=e.fileRelationColumnName,s=e.tableGroupName;this.relationTableName=i,this.relationColumnName=o,this.tableGroupName=s},searchFiles:function(){var e=this,t=this.currentFiles,a={relationId:e.relationId,relationTableName:e.relationTableName,name:e.keywords,rootId:e.rootId,filesRelationsId:t?t.filesRelationsId:""};this.relationColumnName&&(a.relationColumnName=this.relationColumnName),this.tableGroupName&&(a.tableGroupName=this.tableGroupName);var i="file/getRelationFiles";2!=this.typeId&&(i="file/getFiles",a={groupId:e.rootId||1,name:e.keywords}),e.$http.post(i,a).then((function(t){e.getFileData=t.data.data.fileList||[],e.fileData=t.data.data.filegroupList||[]})).catch((function(e){console.log(JSON.stringify(e))}))},getFiles:function(e,t,a){var i=this;if(this.rootId=t||"",e?(this.currentFiles=e,this.typeId=e.typeId):(this.currentFiles=null,this.typeId=2),this.relationId){var n={relationId:this.relationId,relationTableName:this.relationTableName,rootId:t||"",filesRelationsId:t?e.filesRelationsId:""};this.relationColumnName&&(n.relationColumnName=this.relationColumnName),this.tableGroupName&&(n.tableGroupName=this.tableGroupName);var o="file/getRelationFiles";2!=this.typeId&&(o="file/getFiles",n={groupId:t||1}),this.$http.post(o,n).then((function(n){i.getFileData=n.data.data.fileList||[],i.fileData=n.data.data.filegroupList||[],t&&!a?i.filePath.push(e):a||(i.filePath=[{name:i.$t("lang-relationFile-associated"),id:1}]),uni.setStorageSync("relationFilePath",i.filePath)})).catch((function(e){console.log(JSON.stringify(e))}))}},goToStep:function(e,t){if(void 0!=t&&"undefined"!=t){var a;a=this.filePath.slice(0,t+1),this.filePath=a,uni.setStorageSync("relationFilePath",this.filePath),e&&1!=e.id?this.getFiles(e,e.id,a):this.getFiles()}},downloadFile:function(e,t,a){var i=this,n="_downloads/"+t;this.fileLength=a,plus.io.resolveLocalFileSystemURL(n,(function(e){e.isFile&&uni.showModal({title:i.$t("basic-modalTip"),content:i.$t("choiceTip-whetherOpen")+t+i.$t("page-attachmentView")+"?",confirmText:i.$t("basic-confirm"),cancelText:i.$t("basic-cancel"),success:function(t){t.confirm&&plus.runtime.openFile(n,{},(function(t){plus.nativeUI.alert(i.$t("pageTip-unableOpenFile")+"：entry"+e.toLocalURL()+"symurl"+n)}))}})}),(function(){i.dowload(e,t,a)}))},dowload:function(e,t,a){var i=this,n={method:"GET",filename:"_downloads/"+t},o="".concat(this.baseUrl||this.defaultUrl,"file/download?id=").concat(e,"&token=").concat(this.token),s=plus.downloader.createDownload(o,n,(function(e,t){if(200!=t)return console.log("文件不存在"),void(i.isLoading=!1)}));i.percent=0,s.start(),s.addEventListener("statechanged",(function(e,n){if(401!==n)switch(i.isLoading=!0,e.state){case 1:console.log("开始下载...");break;case 2:console.log("链接到服务器...");break;case 3:console.log("已接受到数据");var o=Math.floor(e.downloadedSize/a/10.24)||0;i.percent=o,console.log(i.percent);break;case 4:console.log("下载完成！"),console.log(JSON.stringify(e)),i.isLoading=!1,uni.showModal({title:i.$t("basic-modalTip"),content:i.$t("choiceTip-whetherOpen")+t+i.$t("page-attachmentView")+"?",confirmText:i.$t("basic-confirm"),cancelText:i.$t("basic-cancel"),success:function(t){t.confirm&&plus.runtime.openFile(e.filename,{},(function(e){console.log(e),plus.nativeUI.alert(i.$t("pageTip-unableOpenFile")+"："+e.message)}))}});break}else i.isLoading=!1}),!1)},cancleDownload:function(){this.isLoading=!1,plus.downloader.clear()},formatDate:function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var n=t.getDate();n=n<10?"0"+n:n;var o=t.getHours();o=o<10?"0"+o:o;var s=t.getMinutes();s=s<10?"0"+s:s;var l=t.getSeconds();return l=l<10?"0"+l:l,a+"-"+i+"-"+n+" "+o+":"+s+":"+l},formatSize:function(e){return e>1024?parseInt(e/10.24)/100+"M":e+"K"},formatIcon:function(e){var t=e.split(".");return e=t[t.length-1],e},previewFile:function(e,t,a){var i=this.formatIcon(t);"jpg"==i||"jpeg"==i||"png"==i?this.previewImage(a):"mp3"==i?this.previewSound(a):"mp4"==i?this.previerVideo(a):"pdf"==i&&this.previerPdf(e,t,a)},previewImage:function(e){uni.previewImage({urls:[e],longPressActions:{success:function(e){},fail:function(e){console.log(e.errMsg)}}})},previewSound:function(e){var t=this;this.innerAudioContext.src,this.innerAudioContext=uni.createInnerAudioContext(),this.innerAudioContext.src=e,this.innerAudioContext.onPlay((function(){t.duration=t.innerAudioContext.duration})),this.innerAudioContext.autoplay=!0,this.isPreviewSound=!0,this.innerAudioContext.onTimeUpdate((function(e){t.currentTime=t.innerAudioContext.currentTime,t.surplusTime=t.duration-t.currentTime,t.durationWidth=parseInt(1e4*t.currentTime/t.duration)/100+"%"}))},stopPreviewSound:function(){this.innerAudioContext.destroy(),this.isPreviewSound=!1,this.durationWidth=0,this.currentTime=0,this.surplusTime=0,console.log(this.innerAudioContext)},previerVideo:function(e){this.videoContext=uni.createVideoContext("previerVideo"),this.isPreviewVideo=!0,this.videoUrl=e},shopPreviewVideo:function(){this.isPreviewVideo=!1},previerPdf:function(e,t,a){a="/pages/common/preview?url="+a,setTimeout((function(){uni.navigateTo({url:a})}),100)},formatTime:function(e,t){e=parseInt(e);var a=parseInt(e/60),i=e%60>=10?e%60:"0"+e%60;return 1==t?a+":"+i:"-"+a+":"+i}},mounted:function(){this.getFiles()}});t.default=u},e4a0:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".haveStatusBar[data-v-772e3562],\r\n.topshow-status[data-v-772e3562],\r\n.topBtn[data-v-772e3562],\r\n.hasstatus[data-v-772e3562]{height:0}.tab-box[data-v-772e3562]{top:0}.path-wrap[data-v-772e3562],\r\n.list-wrap[data-v-772e3562]{margin-top:0}",""]),e.exports=t},ea34:function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.ELEMENT_SCAN=t.ELEMENT_BACKFRAME=void 0,a("c740");var n=i(a("5441")),o=a("4037");t.ELEMENT_SCAN=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return"1"===n.default.state.QRType&&(0,o.onWxScan)((function(a){e.scancode=a.resultStr,e.scancode&&t.call(void 0,e)})),!1};t.ELEMENT_BACKFRAME=function(e){var t=getCurrentPages(),a=t.findIndex((function(t){return t.$vm._uid===e.frameUId})),i=t[a];return{pageNum:t.length,pageIndex:a,templateType:i.templateType}}},ef50:function(e,t,a){var i=a("a586");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("6cfcaa04",i,!0,{sourceMap:!1,shadowMode:!1})},f7ad:function(e,t,a){"use strict";a.r(t);var i=a("ca3d"),n=a("b50d");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("cf0c");var s=a("f0c5"),l=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"b2663b3a",null,!1,i["a"],void 0);t["default"]=l.exports}}]);