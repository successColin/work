// #ifdef H5
import * as dd from 'dingtalk-jsapi';
import ZheZhengdd from 'gdt-jsapi';
// #endif

// 钉钉设置 title
export function ChangePageTitle(title) {
	// #ifdef H5
  const ua = navigator.userAgent.toLowerCase();
  if (ua.indexOf('dingtalk') > -1) {
    dd.biz.navigation.hideBar({
      hidden: true, // true：隐藏，false：显示
    });
  }
	// #endif
}

// 浙政钉获取 code
export async function getDingDingCode(callback) {
	// #ifdef H5
  const ua = navigator.userAgent.toLowerCase();
	let getCode = '';
  if (ua.indexOf('saas') > -1) {
		ZheZhengdd.hideTitleBar()
		await ZheZhengdd.getAuthCode({}).then((result) =>{
			const code = result.code;
			if (code) {
				getCode = code;
			}
		})
  }
	return getCode;
	// #endif
}

// 浙政钉隐藏 title
export async function hidddleDingDingTitle(callback) {
	// #ifdef H5
  const ua = navigator.userAgent.toLowerCase();
  if (ua.indexOf('saas') > -1) {
		ZheZhengdd.hideTitleBar()
  }
	// #endif
}
