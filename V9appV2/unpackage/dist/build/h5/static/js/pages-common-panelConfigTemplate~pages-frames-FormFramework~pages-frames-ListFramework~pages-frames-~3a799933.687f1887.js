(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-panelConfigTemplate~pages-frames-FormFramework~pages-frames-ListFramework~pages-frames-~3a799933"],{"0d10":function(t,e,a){"use strict";a.r(e);var n=a("171c"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=r.a},1538:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.topBtnsComs[data-v-46fa97c2]{display:flex}',""]),t.exports=e},"171c":function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a("5530")),i=a("26cb"),s=n(a("db28")),o=n(a("f07f")),l=new o.default,c={components:{uniDrawer:s.default},props:{tabInfo:{type:Object,default:function(){return{}}},btnBasicInfo:{type:Object,default:function(){return{normalEvent:["addBtn","relationAddBtn"],delEvent:[],saveEvent:[]}}}},computed:(0,r.default)((0,r.default)((0,r.default)({},(0,i.mapState)("form",["currentTopRightBtns","currentComboBoxs"])),(0,i.mapState)("common",{tabsElements:"tabsElements",tabsFormDatas:"tabsFormDatas"})),{},{btnInfo:function(){return function(t){var e={type:t.type,relationTabId:t.relationTabId,relationTableName:t.relationTableName,elementId:t.elementId},a={};return 18===t.baseType&&(a.relationColumn=t.relationColumnName),(0,r.default)((0,r.default)({},e),a)}},buttons:function(){var t=this.tabInfo.mobileTabId;return this.currentTopRightBtns[t]},comboBoxs:function(){var t=this.tabInfo.mobileTabId;return this.currentComboBoxs[t]||[]},isShowComboBoxs:function(){return this.comboBoxs.length}}),methods:(0,r.default)((0,r.default)((0,r.default)({},(0,i.mapMutations)("common",["SET_TEMPLATE_PARAMS"])),(0,i.mapMutations)(["SET_BusinessID"])),{},{showByPermissiones:function(t,e){if(!e)return!1;var a=this.tabInfo.bundleId;return this.Static_GlobalFucs.Permissiones(a,t)},handleBtnClick:function(t){t=(0,r.default)((0,r.default)((0,r.default)({},this.tabInfo),this.btnBasicInfo),t),t.isFrames&&"addBtn"===t.type&&this.SET_BusinessID(""),l.click(t,this)},showComBox:function(){this.$emit("showComBox")},loading:function(){this.$emit("loading")},selfRefresh:function(){this.$emit("selfRefresh")},btnEvent:function(t){}})};e.default=c},4218:function(t,e,a){"use strict";var n=a("7629"),r=a.n(n);r.a},"4bc4":function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.common_inventoryScanInster=e.common_inParam_selectByRelationId=e.common_getDeviceCheck=void 0,a("99af");e.common_inParam_selectByRelationId=function(t,e){return e.$http.post("inParam/selectByRelationId",t).then((function(t){var e=t.data||{};return e&&e.data})).catch((function(t){return uni.showModal({title:e.$t("basic-modalTipError"),content:result.msg,showCancel:!1,confirmText:e.$t("basic-confirm")}),[]}))};e.common_getDeviceCheck=function(t,e){var a="".concat("fixedCode/relationGetByHeadId","/").concat(t);return e.$http.get(a).then((function(t){var e=t.data||{};return e&&e.data})).catch((function(t){return uni.showModal({title:e.$t("basic-modalTipError"),content:t,showCancel:!1,confirmText:e.$t("basic-confirm")}),{}}))};e.common_inventoryScanInster=function(t,e){return e.$http.post("currency/currencyInventoryScanning",t).then((function(t){var e=t.data||{};return e&&e.data})).catch((function(a){uni.showModal({title:e.$t("basic-modalTipError"),content:"扫描结果:".concat(t.deviceKeyCode,",").concat(a),showCancel:!1,confirmText:e.$t("basic-confirm")})}))}},"5bf6":function(t,e,a){"use strict";a.r(e);var n=a("9b66"),r=a("0d10");for(var i in r)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(i);a("4218");var s=a("f0c5"),o=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"46fa97c2",null,!1,n["a"],void 0);e["default"]=o.exports},6595:function(t,e,a){"use strict";var n=a("f144"),r=a.n(n);r.a},7629:function(t,e,a){var n=a("1538");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=a("4f06").default;r("4df3196e",n,!0,{sourceMap:!1,shadowMode:!1})},7874:function(t,e,a){"use strict";a.r(e);var n=a("dd54"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=r.a},"88ec":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.haveStatusBar[data-v-6e27e598]{height:0}.uni-drawer[data-v-6e27e598]{display:block;position:fixed;top:0;left:0;right:0;bottom:0;overflow:hidden;visibility:hidden;z-index:101;height:100%}.uni-drawer.uni-drawer--right .uni-drawer__content[data-v-6e27e598]{left:auto;right:0;-webkit-transform:translatex(100%);transform:translatex(100%)}.uni-drawer.uni-drawer--visible[data-v-6e27e598]{visibility:visible}.uni-drawer.uni-drawer--visible .uni-drawer__content[data-v-6e27e598]{-webkit-transform:translatex(0);transform:translatex(0)}.uni-drawer.uni-drawer--visible .uni-drawer__mask[data-v-6e27e598]{display:block;opacity:1}.uni-drawer__mask[data-v-6e27e598]{display:block;opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);transition:opacity .3s}.uni-drawer__content[data-v-6e27e598]{display:block;position:absolute;top:0;left:0;width:61.8%;height:100%;background:#fff;transition:all .3s ease-out;-webkit-transform:translatex(-100%);transform:translatex(-100%)}',""]),t.exports=e},"9b66":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"topBtnsComs"},[t.isShowComboBoxs?a("m-button",{attrs:{btnClass:"mainColor",isFontBtn:!0},on:{elementClick:function(e){arguments[0]=e=t.$handleEvent(e),t.showComBox.apply(void 0,arguments)}}},[a("template",{staticStyle:{display:"inline-block"},attrs:{slot:"buttonIcon"},slot:"buttonIcon"},[a("m-font-icon",{attrs:{icon:"iconyewushaixuan",iconSize:40}})],1)],2):t._e(),t._l(t.buttons,(function(e,n){return t.showByPermissiones(e.baseType,e.visiabled)?a("m-button",{key:n,attrs:{isFontBtn:!0,btnClass:e.btnStyle,btnInfo:t.btnInfo(e)},on:{elementClick:function(e){arguments[0]=e=t.$handleEvent(e),t.handleBtnClick.apply(void 0,arguments)}}},[a("template",{staticStyle:{display:"inline-block"},attrs:{slot:"buttonIcon"},slot:"buttonIcon"},[a("m-font-icon",{attrs:{icon:e.iconfont,iconSize:40}})],1)],2):t._e()}))],2)},r=[]},db28:function(t,e,a){"use strict";a.r(e);var n=a("dd43"),r=a("7874");for(var i in r)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(i);a("6595");var s=a("f0c5"),o=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"6e27e598",null,!1,n["a"],void 0);e["default"]=o.exports},dd43:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.visibleSync?a("v-uni-view",{staticClass:"uni-drawer",class:{"uni-drawer--visible":t.showDrawer,"uni-drawer--right":t.rightMode},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.moveHandle.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-drawer__mask",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"uni-drawer__content"},[a("v-uni-view",{staticClass:"haveStatusBar"}),t._t("default")],2)],1):t._e()},r=[]},dd54:function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"uni-drawer",props:{visible:{type:Boolean,default:!1},mode:String,mask:{type:[Boolean,String],default:!0}},data:function(){return{visibleSync:!1,showDrawer:!1,rightMode:!1,closeTimer:null,watchTimer:null}},watch:{visible:function(t){var e=this;clearTimeout(this.watchTimer),setTimeout((function(){e.showDrawer=t}),100),this.visibleSync&&clearTimeout(this.closeTimer),t?this.visibleSync=t:this.watchTimer=setTimeout((function(){e.visibleSync=t}),300)}},computed:{showMask:function(){return"true"===String(this.mask)}},created:function(){var t=this;this.visibleSync=this.visible,setTimeout((function(){t.showDrawer=t.visible}),100),this.rightMode="right"===this.mode},methods:{close:function(){var t=this;this.showDrawer=!1,this.$emit("close"),this.closeTimer=setTimeout((function(){t.visibleSync=!1}),200)},moveHandle:function(){}}};e.default=n},f07f:function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("99af"),a("ac1f"),a("d3b7"),a("3ca3"),a("ddb0"),a("7db0"),a("c975"),a("d81d");var r=n(a("c7eb")),i=n(a("1da1")),s=n(a("5530")),o=n(a("2909")),l=n(a("d4ec")),c=n(a("bee2")),u=a("f047"),d=a("ab7c"),m=a("cd03"),f=a("4bc4"),b=function(){function t(e,a){(0,l.default)(this,t),this.btnBasicInfo={normalEvent:["normalBtn","addBtn","jumpMenuBtn","jumpTabBtn"],delEvent:["delBtn"],saveEvent:["saveBtn","archiveBtn","normalArchiveBtn"]}}return(0,c.default)(t,[{key:"triggerClassify",value:function(t,e){var a=t.triggerMap||[],n=a[t.elementId]||[];if(0!==n.length){for(var r=t.relationMainTab,i=t.mobileTabId,l={triggers:n},c=(0,d.TRIGGRT_NOTWEB)(l),u=c.triggerIds,m=c.procedure_triggerIds,f=c.http_triggerIds,b=[].concat((0,o.default)(u.paramValues),(0,o.default)(m.paramValues),(0,o.default)(f.paramValues)),p={},v=0,g=b.length;v<g;v++){var h=b[v];if(/^@@/.exec(h)){var y={key:h,otherTabId:r,mobileTabId:i,tabsElements:e.tabsElements,tabsFormDatas:e.tabsFormDatas,tabStaticParams:t.tabStaticParams},_=e.Static_GlobalFucs.Global_ParamFormat(y,e),I={};_.element&&(I=(0,d.TRIGGRT_BaseValue)(_.element.baseType,1,_.id)),_=(0,s.default)((0,s.default)({},_),I),p[h]=_.id||""}}return{triggerIds:u.triggerIds.join(","),http_triggerIds:f.triggerIds.join(","),procedure_triggerIds:m.triggerIds.join(","),queryParams:p}}}},{key:"httpEvent",value:function(t,e){return t.triggerIds?m.formApi.currencyHttpRequest(e,t,!1):new Promise((function(t,e){t({success:!0})}))}},{key:"normalTriggers",value:function(t,e){return t.static_triggerIds||t.static_procedure_triggerids?m.formApi.currencyInsertOrUpdateByTriggers(e,t):new Promise((function(t,e){t({success:!0})}))}},{key:"normalEvents",value:function(t,e){var a=t.triggerValue,n=a.triggerIds,r=a.procedure_triggerIds,i=a.http_triggerIds,s=a.queryParams;if(n||r||i){e.loading(!0);var o={static_triggerIds:n,static_procedure_triggerids:r,static_globalMap:s},l={triggerIds:i,globalMap:s};Promise.all([this.normalTriggers(o,e),this.httpEvent(l,e)]).then((function(a){var n=a.find((function(t){return!t||!1===t.success}))||"";if(n)throw n;e.btnEvent(t.elementFormat),e.Static_GlobalFucs.showToast({title:"操作成功"})})).catch((function(t){e.loading(!1)}))}else e.btnEvent(t.elementFormat)}},{key:"batchSaveEvents",value:function(t,e){var a=t.formData;if(!a.static_ids)return{success:!1,msg:"请选择数据"};var n=t.triggerValue,r=n.triggerIds,i=n.procedure_triggerIds,s=n.queryParams;return a.static_triggerIds=r,a.static_procedure_triggerids=i,a.static_globalMap=s,m.formApi.batchInsertOrUpdate(e,a)}},{key:"batchDelEvents",value:function(t,e){if(!t.ids)return{success:!1,msg:"请选择数据"};var a={ids:t.ids,tableName:t.tableName,triggerIds:t.triggerValue.triggerIds};return m.formApi.batchDelete(e,a)}},{key:"delEvents",value:function(t,e){if(!t.id)return{success:!1,msg:"请选择数据"};t.id,t.tableName,t.triggerValue.triggerIds;return m.formApi.currencyDelete(e,t)}},{key:"saveEvents",value:function(t,e){var a=t.triggerValue,n=a.triggerIds,r=a.procedure_triggerIds,i=a.queryParams,s=t.formData;return s.static_triggerIds=n,s.static_procedure_triggerids=r,s.static_globalMap=i,s.static_elementId?m.formApi.currencyMultiInsert(e,s):m.formApi.insertUpdateDate(e,s)}},{key:"archiveEvents",value:function(t,e){if(!t.formData.id)return{success:!1,msg:"请选择数据"};var a=t.triggerValue,n=(a.triggerIds,a.procedure_triggerIds),r=(a.queryParams,{});r.id=t.formData.id,r.static_tableName=t.static_tableName,r.static_triggerIds=a.triggerIds,r.static_procedure_triggerids=n,r.static_globalMap=a.queryParams,"@@null"in r.static_globalMap&&delete r.static_globalMap["@@null"];var i="archiveCycleHandle";return"normalArchiveBtn"===t.type&&(i="archiveHandle"),m.formApi[i](e,r)}},{key:"getJumpBundleParam",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,a=t.passParam,n="";if(a)try{n=JSON.parse(a)}catch(d){}if(n){for(var r={mobileTabId:t.mobileTabId,tabsElements:t.tabsElements,tabsFormDatas:t.tabsFormDatas,tabStaticParams:t.tabStaticParams},i="",s=0,o=n.length;s<o;s++){var l=n[s],c=l.value;r.key=c;var u=e.Static_GlobalFucs.Global_ParamFormat(r,e);u.relationColumnType=l.type||u.relationColumnType,i||(i={}),i[l.key]=u}return i}}},{key:"click",value:function(t,e){var a=t.elementId,n=(t.saveEvent,t.normalEvent||[]),o=t.relationTabId,l=t.label,c={};if(a){c=this.triggerClassify({elementId:a,triggerMap:t.trigger,mobileTabId:t.mobileTabId,relationTabId:t.relationTabId,tabStaticParams:t.tabStaticParams},e)||{triggerIds:"",http_triggerIds:"",procedure_triggerIds:"",queryParams:{}}}if(-1!==n.indexOf(t.type)){var d={triggerValue:c,parentRefresh:t.parentRefresh,selfRefresh:t.selfRefresh,mobileTabId:t.mobileTabId,elementFormat:t.elementFormat};this.normalEvents(d,e);var m="",b="";if(t.jumpBundleId||o){var p=t.jumpBundleId||"",v=t.bundlesList||[];p&&(m="bundle"),b=v.find((function(t){return t.id==p}))||"",b?m="bundle":o&&(m="tab")}if("bundle"===m){var g=t.jumpBundleId||"";if(b){if(!b.template)return void e.Static_GlobalFucs.showModal(e,{title:e.$t("basic-inquiry"),content:e.$t("pageTip-configuration"),showCancel:!1});var h=u.FRAMS_TYPE[b.bundleFrameType];e.SET_FRAMETYPE(h);var y="/pages/frames/".concat(h,"?title=").concat(b.bundleName,"&bundleId=").concat(b.id,"&mainTab=1&V=").concat(b.bundleVersion,"&jumpTag=").concat(t.bundleId);(0,f.common_inParam_selectByRelationId)({bundleId:g},e).then((function(a){var n=t.jumpBundleParam,r={};a.map((function(t){if(t.name in n){var e=n[t.name]||{};console.log(e),r[t.name]=n[t.name]}})),e.SET_FRAMS_JUMINParams({tag:g,source:t.bundleId,bundleParams:r}),uni.navigateTo({url:y})}))}else e.Static_GlobalFucs.showToast({title:"无权限"})}else if("tab"===m){var _=t.mobileTabs||{},I=_[o],T=u.FRAMS_SHOWTYPE[I.mobileTabShowType],w={tabId:o,params:{static_ids:t.ids,relationTab:o,relationMainTab:t.mobileTabId,bundleId:t.bundleId,onkey:t.selfKey}},B=t.templateType,k=t.tabStaticParams;"list"===B&&k&&k.GlobalIds&&(w.params.GlobalIds=(0,s.default)({},k.GlobalIds));"addBtn"===t.type?(w.params.type="addBtn",T="templates/formTemplate"):"relationAddBtn"===t.type?(w.params.type="addBtn",w.params.mainnColumn=t.mainnColumn,w.params.relationColumn=t.relationColumn,w.params.relationTableName=t.relationTableName):-1!==["normalBtn","jumpMenuBtn","jumpTabBtn"].indexOf(t.type)&&"list"===B&&(w.params.type="batch"),6===I.mobileTabShowType&&(w.params.ids=t.submitFormData.ids),e.SET_TEMPLATE_PARAMS(w),e.Static_GlobalFucs.gotoOtherRoute(w,T)}return"normalEvent"}var E=this;e.Static_GlobalFucs.showModal(e,{content:"是否"+l,success:function(){var a=(0,i.default)((0,r.default)().mark((function a(n){var i,s;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!n.confirm){a.next=43;break}if(e.loading(!0),i={tableName:t.relationTableName,triggerValue:c},s=!1,"delBtn"!==t.type){a.next=18;break}if(!t.submitFormData.ids){a.next=12;break}return i.ids=t.submitFormData.ids,a.next=9,E.batchDelEvents(i,e);case 9:s=a.sent,a.next=16;break;case 12:return i.id=t.submitFormData.id,a.next=15,E.delEvents(i,e);case 15:s=a.sent;case 16:a.next=41;break;case 18:if("saveBtn"!==t.type){a.next=26;break}return i.formData=t.submitFormData,i.formData.static_tableName=t.relationTableName,a.next=23,E.saveEvents(i,e);case 23:s=a.sent,a.next=41;break;case 26:if("batchSaveBtn"!==t.type){a.next=34;break}return i.formData=t.submitFormData,i.formData.static_tableName=t.relationTableName,a.next=31,E.batchSaveEvents(i,e);case 31:s=a.sent,a.next=41;break;case 34:if("archiveBtn"!==t.type&&"normalArchiveBtn"!==t.type){a.next=41;break}return i.type=t.type,i.formData=t.submitFormData,i.static_tableName=t.relationTableName,a.next=40,E.archiveEvents(i,e);case 40:s=a.sent;case 41:s=s||{success:!1},s.success?(E.httpEvent({triggerIds:c.http_triggerIds,globalMap:c.queryParams},e),t.saveCallback&&t.saveCallback.call(e),e.btnEvent(t.elementFormat,{tip:!0,tipContent:s.msg})):e.loading(!1);case 43:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()})}}]),t}(),p=b;e.default=p},f144:function(t,e,a){var n=a("88ec");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=a("4f06").default;r("b89fc3c4",n,!0,{sourceMap:!1,shadowMode:!1})}}]);