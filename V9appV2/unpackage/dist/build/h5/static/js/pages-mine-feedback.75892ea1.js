(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-feedback"],{1555:function(e,t,n){var i=n("f159");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("b82c65c8",i,!0,{sourceMap:!1,shadowMode:!1})},2018:function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("c975"),n("a434"),n("e9c4"),n("a4d3"),n("e01a");var a=i(n("c7eb")),s=i(n("1da1")),c=i(n("53ca")),l=i(n("546e")),u=i(n("34e3")),o=i(n("043e")),r=i(n("2822")),d=i(n("4bd5")),f={components:{mUpload:l.default,mpvuePicker:r.default},data:function(){return{image:u.default,pickerValueDefault:[],pickerText:"",basetype:"",description:"",pickerValueArray:[{label:this.$t("lang-feedback-system-defects"),value:1},{label:this.$t("lang-feedback-functional-requirements"),value:2},{label:this.$t("lang-feedback-optimization-suggestions"),value:3}],pickerMenuText:"",pickerMenuArray:["PC","APP"],pickerMenuSecondArray:[],secondMenuArray:[],firstMenuShow:!1,secondMenuShow:!1,selectMenu:"",selectMenuName:"",selectFirstMenu:"",upload_picture_list:[],tableName:"feedback",userId:o.default.userId,typeId:"2",fileIds:[],upImgBasic:{basicConfig:{url:"file/uploadFiles"},notli:!0,sizeType:!0},iconSize:32,element:{visiabled:!0},currentFormData:{},uploadPics:[]}},filters:{formValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=t.elementId||"",a=e[i]||"";try{a=JSON.parse(a)}catch(s){}return a=1===n?"object"!==(0,c.default)(a)?a:a.id||"":3===n?a||{}:"object"!==(0,c.default)(a)?a:a.name||"",4===t.relationColumnType&&a&&(a=COMMON_FORMAT_DECIMAL(a)),a}},methods:{upBasicData:function(e){var t=this;return(0,s.default)((0,a.default)().mark((function n(){var i,s,c,l,u;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(t,i=e.uploadPics,s=e.getPicParam,t.uploadPics=i,[],c=0,l=i.length;c<l;c++)try{""!=i[c].id&&(u=i[c].id,t.fileIds[u]={typeId:s.relationTypeId,stateId:s.relationStateId,priorityId:s.relationpriorityId})}catch(a){console.log("上传失败...")}case 5:case"end":return n.stop()}}),n)})))()},imageConfig:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{allImgsParam:{element:e,triggerBaseType:"upImg"}}}},requestConfig:function(){return{submitUrl:"file/uploadFiles",submitParam:(0,d.default)({tableName:"feedback"}),getPicParam:{relationId:this.userId,relationTableName:"feedback",relationTypeId:2}}},elementValueChang:function(e){return(0,s.default)((0,a.default)().mark((function e(){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},handleTopClick:function(){uni.navigateTo({url:"/pages/home/home?pageType=myself"})},setType:function(e){e.type="default"==e.type?"error":"default",e.inverted=!e.inverted},delImgInfo:function(e){var t=this;return(0,s.default)((0,a.default)().mark((function n(){var i;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=t.fileIds.indexOf(e),t.fileIds.splice(i,1),console.log("你删除的图片地址为:",e);case 3:case"end":return n.stop()}}),n)})))()},getUpImgInfoBasic:function(){console.log("后端转成一维数组:",this.basicArr.join().split(","))},showSinglePicker:function(e){this.$refs.mpvuePicker.show()},onConfirm:function(e){this.pickerText=e.label,this.basetype=e.id},showFirstMenuPop:function(){this.firstMenuShow=!0},openSecondMenu:function(e){this.firstMenuShow=!1,this.secondMenuShow=!0,"0"==e&&this.getPcFunction(e),this.terminalType=e+1,this.firstSelectMenu=this.pickerMenuArray[e]},selectSecondMenu:function(e){this.secondMenuShow=!1,this.selectMenuName=this.firstSelectMenu+"-"+e.name,this.selectMenu=e},handleGoFirstMenuClick:function(){this.firstMenuShow=!0,this.secondMenuShow=!1},handleHideFirstMenuClick:function(){this.firstMenuShow=!1},getPcFunction:function(e){var t=this,n="";"0"==e?n="feedback/getPCfunction":"1"==e&&(n="feedback/getAPPfunction"),this.$http.post(n,{userId:o.default.userId}).then((function(e){var n=e.data;n.success&&(t.secondMenuArray=e.data.data)})).catch((function(e){console.log(JSON.stringify(e))}))},saveFeedback:function(){var e=this;this.$http.post("feedback/insert",{basetype:this.basetype,description:this.description,functionId:this.selectMenu.id,terminalType:this.terminalType,userId:o.default.userId}).then((function(t){var n=t.data;n.success&&uni.showToast({title:e.$t("lang-feedback-feedback-success"),duration:1e3,icon:"none"})})).catch((function(e){console.log(JSON.stringify(e))}))}}};t.default=f},"34e3":function(e,t,n){e.exports=n.p+"static/img/feedback_head.f0a0ee7b.png"},"3ade":function(e,t,n){"use strict";var i=n("1555"),a=n.n(i);a.a},"79ed":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"feedback"},[n("m-back-bar",[n("template",{attrs:{slot:"barTitle"},slot:"barTitle"},[e._v(e._s(e.$t("lang-myself-feedback")))]),n("template",{attrs:{slot:"barRight"},slot:"barRight"},[n("m-button",{on:{elementClick:function(t){arguments[0]=t=e.$handleEvent(t),e.handleTopClick()}}},[n("template",{staticStyle:{display:"inline-block"},attrs:{slot:"buttonIcon"},slot:"buttonIcon"},[n("m-font-icon",{attrs:{iconSize:40}})],1)],2)],1)],2),n("v-uni-view",{staticClass:"banner-view"},[n("v-uni-image",{staticClass:"feedback-headerimg",attrs:{src:e.image,mode:"widthFix"}}),n("v-uni-view",{staticClass:"tips"},[e._v(e._s(e.$t("page-feedbackTips")))]),n("v-uni-view",{staticClass:"QA-title"},[n("v-uni-view",[n("m-font-icon",{attrs:{icon:"iconchangjianwenti",color:"#fff",iconSize:30}})],1),n("span",[e._v(e._s(e.$t("page-feedbackQA")))])],1)],1),n("v-uni-view",{staticClass:"tags-container"},[n("v-uni-view",{staticClass:"user-bundle"},[n("v-uni-view",{staticClass:"bundle-name"},[e._v(e._s(e.$t("lang-feedback-type")))]),n("v-uni-view",{staticClass:"bundle-trigger",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showSinglePicker.apply(void 0,arguments)}}},[n("span",{staticClass:"trigger-item",attrs:{type:"default"}},[e._v(e._s(e.pickerText))])]),n("v-uni-view",{staticClass:"arrow-right"},[n("span")])],1),n("v-uni-view",{staticClass:"user-bundle"},[n("v-uni-view",{staticClass:"bundle-name"},[e._v(e._s(e.$t("lang-feedback-select-menu")))]),n("v-uni-view",{staticClass:"bundle-trigger",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showFirstMenuPop.apply(void 0,arguments)}}},[n("span",{staticClass:"trigger-item",attrs:{type:"default"}},[e._v(e._s(e.selectMenuName))])]),n("v-uni-view",{staticClass:"arrow-right"},[n("span")])],1),n("v-uni-view",{staticClass:"tags"},[n("v-uni-view",{staticClass:"tags-title"},[e._v(e._s(e.$t("lang-feedback-feedback")))]),n("v-uni-textarea",{staticClass:"feedback-text",staticStyle:{height:"200upx"},attrs:{placeholder:e.$t("lang-feedback-feedback-placeholder"),"placeholder-style":"color:#D9D9D9;font-size:14upx;"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1),n("v-uni-view",{staticClass:"upload-wrap"},[n("v-uni-view",{staticClass:"upload-item"},[n("m-upload",{attrs:{uploadNum:-1,element:e.element,base64Url:e._f("formValue")(e.currentFormData),requestConfig:e.requestConfig(),imageConfig:e.element},on:{onUpImg:function(t){arguments[0]=t=e.$handleEvent(t),e.upBasicData.apply(void 0,arguments)},allImgs:function(t){arguments[0]=t=e.$handleEvent(t),e.elementValueChang.apply(void 0,arguments)}}})],1)],1),n("mpvue-picker",{ref:"mpvuePicker",attrs:{pickerValueDefault:e.pickerValueDefault,pickerValueArray:e.pickerValueArray},on:{onConfirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"save-item"},[n("m-button",{attrs:{btnTilte:e.$t("basic-save"),btnClass:"mainColor"},on:{elementClick:function(t){arguments[0]=t=e.$handleEvent(t),e.saveFeedback.apply(void 0,arguments)}}})],1),e.firstMenuShow?n("v-uni-view",{staticClass:"firstMenuPop"},[n("v-uni-view",{staticClass:"title-bar"},[n("v-uni-view",{staticClass:"barTitle"},[e._v(e._s(e.$t("lang-feedback-select-menu")))]),n("v-uni-view",{staticClass:"barRight",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleHideFirstMenuClick()}}},[n("v-uni-view",{staticClass:"buttonIcon",staticStyle:{display:"inline-block"}},[n("m-font-icon",{attrs:{icon:"iconfanhui",color:"#333333",iconSize:40}})],1)],1)],1),n("v-uni-view",{staticClass:"menu-container"},e._l(e.pickerMenuArray,(function(t,i){return n("v-uni-view",{key:i,staticClass:"user-bundle",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openSecondMenu(i)}}},[n("v-uni-view",{staticClass:"bundle-name"},[e._v(e._s(t))]),n("v-uni-view",{staticClass:"arrow-right"},[n("span")])],1)})),1)],1):e._e(),e.secondMenuShow?n("v-uni-view",{staticClass:"firstMenuPop"},[n("v-uni-view",{staticClass:"title-bar"},[n("v-uni-view",{staticClass:"barTitle"},[e._v(e._s(e.$t("lang-feedback-select-menu")))]),n("v-uni-view",{staticClass:"barRight",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleGoFirstMenuClick()}}},[n("v-uni-view",{staticClass:"buttonIcon",staticStyle:{display:"inline-block"}},[n("m-font-icon",{attrs:{icon:"iconfanhui",color:"#333333",iconSize:40}})],1)],1)],1),n("v-uni-view",{staticClass:"menu-container"},e._l(e.secondMenuArray,(function(t,i){return n("v-uni-view",{key:i,staticClass:"user-bundle",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.selectSecondMenu(t)}}},[n("v-uni-view",{staticClass:"bundle-name"},[e._v(e._s(t.name))]),t.id==e.selectMenu.id?n("v-uni-view",{staticClass:"font-icon"},[n("m-font-icon",{attrs:{icon:"iconxuanzhong",color:"#d81e06",iconSize:e.iconSize}})],1):e._e()],1)})),1)],1):e._e()],1)},a=[]},"85c4":function(e,t,n){"use strict";n.r(t);var i=n("79ed"),a=n("c04eb");for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("3ade");var c=n("f0c5"),l=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"a01aa426",null,!1,i["a"],void 0);t["default"]=l.exports},c04eb:function(e,t,n){"use strict";n.r(t);var i=n("2018"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=a.a},f159:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,".haveStatusBar[data-v-a01aa426]{height:0}.firstMenuPop[data-v-a01aa426]{padding-top:0}",""]),e.exports=t}}]);