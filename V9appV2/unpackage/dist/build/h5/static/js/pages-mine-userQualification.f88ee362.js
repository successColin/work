(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-userQualification"],{"1f54":function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("99af"),a("14d9"),a("e9c4");var i=n(a("c7eb")),l=n(a("1da1")),o=n(a("53ca")),u=n(a("5530")),r=n(a("546e")),s=a("26cb"),c=n(a("4bd5")),d={components:{mUpload:r.default},data:function(){return{upload_picture_list:[],tableName:"user",typeId:2,fileIds:[],upImgBasic:{basicConfig:{url:"file/uploadFiles"},notli:!0,sizeType:!0},element:{visiabled:!0},currentFormData:{},uploadPics:[]}},computed:(0,u.default)({},(0,s.mapState)(["userId","baseUrl","defaultUrl","token"])),filters:{formValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=e.elementId||"",i=t[n]||"";try{i=JSON.parse(i)}catch(l){}return i=1===a?"object"!==(0,o.default)(i)?i:i.id||"":3===a?i||{}:"object"!==(0,o.default)(i)?i:i.name||"",4===e.relationColumnType&&i&&(i=COMMON_FORMAT_DECIMAL(i)),i}},methods:{upBasicData:function(t){var e=this;return(0,l.default)((0,i.default)().mark((function a(){var n,l,o,u,r;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(e,n=t.uploadPics,l=t.getPicParam,e.uploadPics=e.uploadPics.concat(n),[],o=0,u=n.length;o<u;o++)try{""!=n[o].id&&(r=n[o].id,e.fileIds[r]={typeId:l.relationTypeId,stateId:l.relationStateId,priorityId:l.relationpriorityId})}catch(i){console.log("上传失败...")}case 5:case"end":return a.stop()}}),a)})))()},imageConfig:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{allImgsParam:{element:t,triggerBaseType:"upImg"}}}},requestConfig:function(){return{submitUrl:"file/uploadFiles",submitParam:(0,c.default)({tableName:"user"}),getPicParam:{relationId:this.userId,relationTableName:"user",relationTypeId:2}}},elementValueChang:function(t){var e=this;return(0,l.default)((0,i.default)().mark((function a(){return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.uploadPics=t.value;case 1:case"end":return a.stop()}}),a)})))()},delImgInfo:function(t){t in this.uploadPics&&delete this.uploadPics[t]},handleTopClick:function(){uni.navigateTo({url:"/pages/home/home?pageType=myself"})},insertUpdateDate:function(){var t=this,e=this;uni.showNavigationBarLoading();var a=[];if(0!=this.uploadPics.length){for(var n=0;n<this.uploadPics.length;n++){var i={mainId:this.uploadPics[n].id,relationTableName:this.tableName,relationId:this.userId,relationTypeId:this.typeId};a.push(i)}a=JSON.stringify(a);var l=this.baseUrl||this.defaultUrl,o=l+"filesrelations/batchInsert";uni.request({url:o,data:{fileString:a},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:this.token},success:function(a){uni.hideNavigationBarLoading(),a.data.success?(uni.showToast({title:e.$t("pageTip-successfulPictureUpload"),duration:1e3}),t.uploadPics=[]):uni.showToast({title:e.$t("pageTip-pictureUploadFailed"),duration:1e3})}})}else uni.hideNavigationBarLoading()},getUpImgInfoBasic:function(){console.log("后端转成一维数组:",this.basicArr.join().split(","))}}};e.default=d},"4771c":function(t,e,a){"use strict";a.r(e);var n=a("cdfb"),i=a("db2c");for(var l in i)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(l);var o=a("f0c5"),u=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=u.exports},cdfb:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"body-content userQualification"},[a("m-back-bar",[a("template",{attrs:{slot:"barTitle"},slot:"barTitle"},[t._v(t._s(t.$t("lang-user-qualification-title")))]),a("template",{attrs:{slot:"barRight"},slot:"barRight"},[a("m-button",{on:{elementClick:function(e){arguments[0]=e=t.$handleEvent(e),t.handleTopClick()}}},[a("template",{staticStyle:{display:"inline-block"},attrs:{slot:"buttonIcon"},slot:"buttonIcon"},[a("m-font-icon",{attrs:{iconSize:40}})],1)],2)],1)],2),a("v-uni-view",{staticClass:"qualification-content"},[a("m-upload",{attrs:{uploadNum:-1,element:t.element,base64Url:t._f("formValue")(t.currentFormData),requestConfig:t.requestConfig(),imageConfig:t.element},on:{onUpImg:function(e){arguments[0]=e=t.$handleEvent(e),t.upBasicData.apply(void 0,arguments)},onImgDel:function(e){arguments[0]=e=t.$handleEvent(e),t.delImgInfo.apply(void 0,arguments)},allImgs:function(e){arguments[0]=e=t.$handleEvent(e),t.elementValueChang.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"save-item"},[a("m-button",{attrs:{btnTilte:t.$t("basic-save"),btnClass:"mainColor"},on:{elementClick:function(e){arguments[0]=e=t.$handleEvent(e),t.insertUpdateDate()}}})],1)],1)],1)},i=[]},db2c:function(t,e,a){"use strict";a.r(e);var n=a("1f54"),i=a.n(n);for(var l in n)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(l);e["default"]=i.a}}]);